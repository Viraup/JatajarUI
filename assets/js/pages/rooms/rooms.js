var $subnavItems,$roomInfoTopPos,$scrollTop,$subnavInner,map,min_selectable_date,max_selectable_date,min_allowed_stay,max_allowed_stay,selected_date,first_blocked,$lang="fa"==$("html").attr("lang"),daterangepicker_format=$lang?"jYYYY/jMM/jDD":"DD/MM/YYYY",datepicker_format=$('meta[name="datepicker_format"]').attr("content"),datedisplay_format=$('meta[name="datedisplay_format"]').attr("content"),url_params=$.app.url.allParametr(),$formatted_checkin=$(".formatted_checkin"),$formatted_checkout=$(".formatted_checkout"),$number_of_guests=$(".number_of_guests"),autosubmit=-1!=window.location.search.indexOf("autosubmit"),$min_stay_msg=$("#min_stay_msg").val(),$max_stay_msg=$("#max_stay_msg").val();$.app.url.getParameter("checkin")&&$(".checkin-label").addClass("input-label-active"),$.app.url.getParameter("checkout")&&$(".checkout-label").addClass("input-label-active"),$(".subnav-container").prependTo("#main_header");var from,to,URL_checkin=$.app.url.decode($.app.url.getParameter("checkin"))||$(".formatted_checkin").val(),URL_checkout=$.app.url.decode($.app.url.getParameter("checkout"))||$(".formatted_checkout").val(),month_title=$lang?{0:"فروردین",1:"اردیبهشت",2:"خرداد",3:"تیر",4:"مرداد",5:"شهریور",6:"مهر",7:"آبان",8:"آذر",9:"دی",10:"بهمن",11:"اسفند"}:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},days_title=$lang?{0:"شنبه",1:"یک‌شنبه",2:"دوشنبه",3:"سه‌شنبه",4:"چهارشنبه",5:"پنج‌شنبه",6:"جمعه"}:{0:"السبت",1:"الأحد",2:"الأثنين",3:"الثلاثاء",4:"الأربعاء",5:"الخميس",6:"الجمعه"};function initialize(){map=L.map("map",{fullscreenControl:!0}).setView([$("#map").attr("data-lat"),$("#map").attr("data-lng")],13),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:""}).addTo(map);var a=L.imageOverlay("../../../../images/persian_gulf.jpg",[[25.809781975840405,48.30163389673707],[28.44937385955666,53.57507139673707]]);map.on("zoomend",function(){var e=map.getZoom();8<e?map.removeLayer(a):e<=8&&map.addLayer(a)}),L.circle([$("#map").attr("data-lat"),$("#map").attr("data-lng")],{color:"#11848e",fillColor:"#7fddc4",fillOpacity:.35,radius:1e3}).addTo(map)}app.controller("rooms_detail",["$scope","$http","$compile","$filter",function(l,n,r,e){var a=$.app.url.decode($.app.url.getParameter("guests")),a=(l.guest_number=parseInt(a)?parseInt(a):0,$(function(){$.ajax({url:APP_URL+"/get_beds/"+l.room_id,dataType:"json",success:function(e){var e=e.beds_details,t='<span class="bed-name">',e=e.reduce(function(e,a){return e[a.bed_name]=e[a.bed_name]?e[a.bed_name]+a.bed_count:a.bed_count,e},{});$.each(e,function(e,a){t+=a+" "+e+"<br>"}),t+="</span>",1<Object.keys(e).length&&$("#expand_beds").show(),$("#room_bed_types").html(t)}}),$("#expand_beds").on("click",function(e){var a=$(this);$(".bed-name").toggleClass("expand-beds"),$(".bed-name").hasClass("expand-beds")?a.text(a.data("close-trans")):setTimeout(function(){a.text(a.data("open-trans"))},300)}),$(".bx-prev").addClass("icon icon-chevron-left icon-gray icon-size-2 "),$(".bx-prev").text(""),$(".bx-next").addClass("icon icon-chevron-right icon-gray icon-size-2 "),$(".bx-next").text(""),$(".slide1").owlCarousel({loop:!1,stagePadding:40,margin:12,rtl:"rtl"==$("html").attr("dir"),responsiveClass:!0,navText:[],responsive:{0:{items:1,nav:!0},425:{items:2,nav:!0},736:{items:3,nav:!0},992:{items:3,nav:!0},1024:{items:3,nav:!0},1128:{items:4,nav:!0}}})}),$(".amenities_section")),t=$(".collapsedSection").height(),s=2*$(".collapsedSection .activeamenities").outerHeight()+10,o=is_mobile?40+s:s,i=$(".cancel-policy-list").height()+10;function d(e,a){$(".collapsedSection, .cancelation-policies-wrap",e).height(a),$(".expandable-trigger-less",e).hide(),$(".expandable-trigger-more",e).show(),$(".collapse-trigger",e).attr("status","collapsed"),$(".collapse-trigger .collapse-chevron",e).removeClass("rotate-chevron")}function c(e,a){$(".collapsedSection, .cancelation-policies-wrap",e).height(a),$(".expandable-trigger-less",e).show(),$(".expandable-trigger-more",e).hide(),$(".collapse-trigger",e).attr("status","expanded"),$(".collapse-trigger .collapse-chevron",e).addClass("rotate-chevron")}function m(e,a,t){var s;"0"==$(".number_of_guests").val()?($(".guests_wrapper").addClass("input-invalid"),$("#required-guests").fadeIn()):(s=l.room_id,$(".js-book-it-status").addClass("loading"),n.post(APP_URL+"/rooms/price_calculation",{checkin:a,checkout:e,guest_count:t,room_id:s}).then(function(e){$("#required-checkin").hide(),$("#bookItCalendar").hide(),$(".datepicker_inputs").removeClass("picker-inputs-active"),"not_available"==e.data.status?($("#book_it_disabled").show(),$(".js-book-it-btn-container").hide(),$(".book_it_disabled_msg").hide(),""==e.data.error?$("#book_it_disabled_message").show():($("#book_it_error_message").text(e.data.error),$("#book_it_error_message").show(),$("#reserve_btn").removeClass("btn_loading").removeAttr("disabled"))):($("#book_it_disabled").hide(),$(".js-book-it-btn-container").show(),(e.data.is_instant_book?($(".regular-boot-title").addClass("hide"),$(".instant-boot-title")):($(".instant-boot-title").addClass("hide"),$(".regular-boot-title"))).removeClass("hide")),$(".js-book-it-status").removeClass("loading"),void 0!==e.data.list&&($(".reserve-detail-list").html(""),$.each(e.data.list,function(e,a){var t=void 0!==a.discount&&1==a.discount?"text-beach":"",s=void 0!==a.bold&&1==a.bold?"bold":"";$(".reserve-detail-list").append('<li class="reserve-detail-item '+t+" "+s+'"><span class="reserve-detail-title">'+a.text+'</span><span class="detail-divider"></span><span class="reserve-detail-value">'+a.value+"</span></li>")})),"not_available"==e.data.status?$(".js-subtotal-container").hide():$(".js-subtotal-container").slideDown(),url_params=$.app.url.allParametr(),URL_checkin&&URL_checkout&&(moment(url_params.checkin,"DD/MM/YYYY").format("YYYY-MM-DD")!=$formatted_checkin.val()||moment(url_params.checkout,"DD/MM/YYYY").format("YYYY-MM-DD")!=$formatted_checkout.val()||url_params.guests!=$number_of_guests.val())&&(history.pushState({checkin:URL_checkin,checkout:URL_checkout,guests:t},"","?checkin="+URL_checkin+"&checkout="+URL_checkout+"&guests="+t),autosubmit&&$("#book_it_form").off("submit").submit())}).catch(function(e){void 0!==e.data.code&&void 0!==e.data.message&&($(".js-book-it-status").removeClass("loading"),$(".reserve-detail-list").html(""),$("#book_it_error_message").text(e.data.message),$("#book_it_error_message").show(),$("#reserve_btn").removeClass("btn_loading").removeAttr("disabled"),$("#view_other_listings_button").hide(),$("#book_it_disabled_message").hide(),$("#book_it_disabled").show())}))}t<s?$(".amenities_section .collapse-trigger").hide():d(a,o),$(".collapse-trigger").click(function(){var e=$(this),a=e.closest(".sec-rows");($collapsable_sec=e.closest(".cancelation-policy-rules")).length?"collapsed"==e.attr("status")?c($collapsable_sec,i):"expanded"==e.attr("status")&&d($collapsable_sec,61):"collapsed"==e.attr("status")?c(a,t):"expanded"==e.attr("status")&&d(a,o)}),setTimeout(function(){var e=l.room_id;n.post(APP_URL+"/rooms/rooms_calendar",{data:e}).then(function(e){$("#room_blocked_dates").val(e.data.not_avilable),$("#calendar_available_price").val(e.data.changed_price),$("#room_available_price").val(e.data.price),$("#weekend_price_tooltip").val(e.data.weekend);$("#room_blocked_dates").val(),$("#room_available_price").val(),(0!=$("#weekend_price_tooltip").val()?$("#weekend_price_tooltip"):$("#room_available_price")).val(),$("#calendar_available_price").val(),e.data.changed_price,e.data.currency_symbol;var e=new Date,a=$(".formatted_checkin").val(),t=$(".formatted_checkout").val();a?moment(a,"DD-MM-YYYY"):moment(e),t?moment(t,"DD-MM-YYYY"):moment(e).add(1,"day"),(t?moment(a,"DD-MM-YYYY"):moment(e)).add(1,"day");a&&($(".checkin-label").addClass("input-label-active"),$("#list_checkin").val(moment(a,"DD-MM-YYYY").format(daterangepicker_format))),t&&($(".checkout-label").addClass("input-label-active"),$("#list_checkout").val(moment(t,"DD-MM-YYYY").format(daterangepicker_format))),$("html body").on("mouseenter",".ui-datepicker-calendar a.ui-state-hover, .ui-datepicker-calendar a.ui-state-default",function(e){$(".highlight").not(".ui-state-disabled").tooltip({container:"body"})}),""!=$("#url_checkin").val()&&""!=$("#url_checkout").val()?(e=$(".formatted_checkin").val(),a=$(".formatted_checkout").val(),t=l.guest_number,$(".number_of_guests").val(t),$("#message_guests").val(t),m(a,e,t)):""!=$("#url_guests").val()&&$(".number_of_guests").val($("#url_guests").val())})},50),$(".number_of_guests").change(function(){var e=$(this).val(),a=$(".formatted_checkin").val(),t=$(".formatted_checkout").val();$("#guest_error").hide(),""!=a&&""!=t&&m(t,a,e)}),l.guest_number_change=debounce(function(){l.$apply();var e=l.guest_number,a=$(".formatted_checkin").val(),t=$(".formatted_checkout").val();$(".guests_wrapper").removeClass("input-invalid"),$("#required-guests").fadeOut(),$("#guest_error").hide(),""!=a&&""!=t&&m(t,a,e)},600),$(".additional_price").hide(),$(".security_price").hide(),$(".cleaning_price").hide(),$(".js-subtotal-container").hide(),$("#book_it_disabled").hide();var u=!0;$("#contact-host-link, #host-profile-contact-btn").click(function(){var e,a,t,s,o;$(".contact-modal").removeClass("hide"),u?(u=!1,e=new Date,a=$(".formatted_checkin").val(),o=$(".formatted_checkout").val(),t=a?moment(a,"DD-MM-YYYY"):moment(e),s=o?moment(o,"DD-MM-YYYY"):moment(e).add(1,"day"),o=(o?moment(a,"DD-MM-YYYY"):moment(e)).add(1,"day"),$("#message_checkin").daterangepicker({singleDatePicker:!0,minDate:e,startDate:t,jalaali:"fa"==lang,opens:"rtl"!=$("html").attr("dir")?"right":"left",dateLimitMin:{days:1},autoApply:!0,locale:{format:daterangepicker_format}},function(e,a,t){var s=a.format("YYYY-MM-DD");$('input[name="message_checkin"]').val(s);var s=a.clone().add(1,"day"),o=s.format("YYYY-MM-DD"),i=new moment(a),l=new moment($("#message_checkout").data("daterangepicker").endDate);l.format("YYYY-MM-DD");l<=i&&""!=$("#message_checkout").val()&&($("#message_checkout").data("daterangepicker").setStartDate(s),$('input[name="message_checkin"]').val(o),$("#message_checkin").data("daterangepicker").maxDate=a),$("#message_checkout").data("daterangepicker").minDate=s}),$("#message_checkout").daterangepicker({singleDatePicker:!0,minDate:o,startDate:s,jalaali:"fa"==lang,opens:"rtl"==$("html").attr("dir")?"right":"left",dateLimitMin:{days:1},autoApply:!0,locale:{format:daterangepicker_format}},function(e,a,t){var s=a.format("YYYY-MM-DD");$('input[name="message_checkout"]').val(s);var s=a.clone().subtract(1,"day"),o=(s.format("YYYY-MM-DD"),new moment($("#message_checkin").data("daterangepicker").endDate));o.format("YYYY-MM-DD");new moment(a)<=o&&$("#message_checkin").val(),$("#message_checkin").data("daterangepicker").maxDate=s})):($("#message_checkin").data("daterangepicker").setStartDate($("#list_checkin").data("daterangepicker").endDate),$("#message_checkout").data("daterangepicker").setStartDate($("#list_checkout").data("daterangepicker").endDate)),$('input[name="message_checkin"]').val($("#message_checkin").data("daterangepicker").endDate.format("YYYY-MM-DD")),$('input[name="message_checkout"]').val($("#message_checkout").data("daterangepicker").endDate.format("YYYY-MM-DD"))}),$(document).on("click",".month-nav",function(e){e.preventDefault();var e=$(this).attr("data-month"),a=$(this).attr("data-year"),t=$(this).attr("data-month-num"),s={},o=$(this).closest(".calendar-wrapper"),i=$(this).closest(".calendar-loading"),e=(s.month=1==e.length?"0"+e:e,s.year=a,s.month_num=t,JSON.stringify(s));return i.addClass("loading"),n.post($(this).attr("data-href"),{data:e}).then(function(e){o.html(r(e.data)(l)),i.removeClass("loading"),$("li[data-date="+selected_date+"]").addClass("selectedDay"),b(selected_date?$('li[data-date="'+selected_date+'"]'):$(".calendar-list > .tile:first")),f()}),!1}),$("body").on("change",".calendar_dropdown",function(){var e=$(this).val(),a=e.split("-")[0],e=e.split("-")[1],t={},e=(t.month=e,t.year=a,JSON.stringify(t));return $(".ui-datepicker-backdrop").removeClass("hide"),$(".calendar-loading").addClass("loading"),n.post($(this).attr("data-href"),{data:e}).then(function(e){$(".ui-datepicker-backdrop").addClass("hide"),$(".calendar-loading").removeClass("loading"),$(".calendar-wrapper").html(r(e.data)(l)),b(selected_date?$("li[data-date="+selected_date+"]"):$(".calendar-list > .tile:first")),f()}),!1});var _=!1,p=!1,h=!1,v={Saturday:"شنبه",Sunday:"یک‌شنبه",Monday:"دوشنبه",Tuesday:"سه‌شنبه",Wednesday:"چهارشنبه",Thursday:"پنج‌شنبه",Friday:"جمعه"};function b(e){h&&g(e)}function f(){var t,s,e,a=$.app.url.decode($.app.url.getParameter("checkin"))||$(".formatted_checkin").val(),o=$.app.url.decode($.app.url.getParameter("checkout"))||$(".formatted_checkout").val(),i=$.app.url.getParameter("checkin")?"DD/MM/YYYY":"YYYY-MM-DD";$.isEmptyObject(a)||$.isEmptyObject(o)||($(".calendar_wrap .selectedDay").removeClass("selectedDay"),a=moment(a,i),o=moment(o,i),t=$(".calendar_wrap li[data-date="+a.format("YYYY-MM-DD")+"]:not(.shade)"),s=$(".calendar_wrap li[data-date="+o.format("YYYY-MM-DD")+"]:not(.shade)"),i=a.format("jYYYY/jMM/jDD"),e=o.format("jYYYY/jMM/jDD"),t.addClass("selectedDay"),s.addClass("selectedDay"),0<t.length&&0==s.length&&(s=$(".calendar-month ul:last-child li:last-child")),(t=0==t.length&&1<s.length?$(".calendar-month ul:last-child li:last-child"):t).length&&s.length&&t.closest(".calendar-month")==s.closest(".calendar-month")&&t.nextUntil(s).addClass("inRange"),$(".tile:not(.tile-previous):not(.shade)").filter(function(e,a){return $(a).data("date")>t[0].id&&$(a).data("date")<s[0].id}).addClass("inRange"),$("#checkin_date").text(i),$("#checkout_date").text(e),$("#checkin_day").text(v[a.format("dddd")]),$("#checkout_day").text(v[o.format("dddd")]),$(".from_to_date").addClass("active"))}function g(e){e=$("li[data-date="+e.data("date")+"]:not(.status-b)"),e.next().attr("data-day"),e=e.nextAll(".status-b:first");if($(".status-z").removeClass("status-z"),$(".first-blocked").addClass("status-b status-r").removeClass("first-blocked"),min_selectable_date=e.length&&moment(e[0].id,"YYYY-MM-DD").isBefore(moment(min_selectable_date,"YYYY-MM-DD"))?null:min_selectable_date){for(var a=1,t=+min_allowed_stay;a<t;a++)$("li[data-date="+moment(selected_date,"YYYY-MM-DD").add(a,"days").format("YYYY-MM-DD")+"]").addClass("stay-invalid min-stay-block");$("li[data-date="+selected_date+"]").addClass("min-stay-block"),$(".min-stay-block").each(function(e,a){$(a).tooltip({title:$min_stay_msg+$("#"+selected_date).data("min_stay"),placement:"auto"})})}max_selectable_date&&($(".tile:not(.previous-tile)").filter(function(e,a){return $(a).data("date")>max_selectable_date}).addClass("stay-invalid max-stay-block"),$(".max-stay-block").each(function(e,a){selected_date?$(a).tooltip({title:$max_stay_msg+$("#"+selected_date).data("max_stay"),placement:"auto"}):$(a).tooltip({title:$max_stay_msg+$(a).data("max_stay"),placement:"auto"})})),first_blocked.length&&($(".tile:not(.tile-previous):not(.shade)").filter(function(e,a){return $(a).data("date")>first_blocked}).addClass("status-z"),$("li[data-date="+first_blocked+"]").removeClass("status-b status-r").addClass("first-blocked").attr("data-original-title",""))}function k(s,o,i){$(".calendar_wrap").find(".calendar-list > .tile:not(.tile-previous)").map(function(e,a){var t=$("li[data-date="+$(this).data("date")+"]");t.removeClass(i),o>t.data("date")&&t.data("date")>s&&t.addClass(i)})}function Y(){_=p=null,min_selectable_date=max_selectable_date=null,h=!1,$(".calendar_wrap .selectedDay").removeClass("selectedDay"),$(".calendar_wrap .inRange").removeClass("inRange"),$("#checkin_date").text(""),$("#checkout_date").text(""),$(".checkin-label").removeClass("input-label-active"),$(".checkout-label").removeClass("input-label-active"),$(".formatted_checkin").val(""),$(".formatted_checkout").val(""),$(".calendar-list .tile").removeClass("status-z"),$(".month-nav,.current-month-selection").removeClass("nav-disabled"),$(".first-blocked").removeClass("first-blocked").addClass("status-b starus-r"),$.app.url.removeParameter("checkin"),$.app.url.removeParameter("checkout"),$(".stay-invalid, .min-stay-block").tooltip("destroy").removeClass("stay-invalid min-stay-block max-stay-block"),$(".js-subtotal-container").slideUp(300)}f(),$(document).on("click",".calendar_wrap .calendar-list > .tile:not(.tile-previous)",function(){var e=$(this),a=$("li[data-date="+e.data("date")+"]:not(.shade)");if(selected_date=a[0].id,_&&p&&(_=p=null),a.hasClass("stay-invalid"))return!1;if(!_||selected_date<_[0].id){if(Y(),a.hasClass("status-b"))return!1;min_selectable_date=max_selectable_date=null,(min_allowed_stay=+a[0].dataset.min_stay)&&(min_selectable_date=moment(selected_date,"YYYY-MM-DD").add(min_allowed_stay,"days").format("YYYY-MM-DD"),e.tooltip({title:$min_stay_msg+a.data("min_stay"),placement:"auto"}).tooltip("show")),(max_allowed_stay=+a[0].dataset.max_stay)&&(max_selectable_date=moment(selected_date,"YYYY-MM-DD").add(max_allowed_stay,"days").format("YYYY-MM-DD")),(first_blocked=$(".tile:not(.tile-previous):not(.shade)").filter(function(e,a){return $(a).data("date")>selected_date&&$(a).hasClass("status-b")}).first()).length&&(first_blocked=first_blocked[0].id),g(e),k(null,null,"selectedDay inRange"),(_=a).addClass("selectedDay"),h=!0,$(".checkin-label").addClass("input-label-active"),$("#checkin_date").text(moment(selected_date,"YYYY-MM-DD").format("jYYYY/jMM/jDD")),$("#checkin_day").parents(".from_to_date").addClass("active"),e[0].id==$(".tile:not(.tile-previous):not(.shade)").last()[0].id&&e.closest(".calendar-wrapper").find(".calendar-nav .month-nav-previous").click()}else $(".status-z").removeClass("status-z"),$(".status-z").removeClass("stay-invalid"),$(".current-month-selection").removeClass("nav-disabled"),$(".month-nav").removeClass("nav-disabled"),(p=$("li[data-date="+$(this).data("date")+"]")).addClass("selectedDay");p&&_&&p.data("date")<_.data("date")?(_.removeClass("selectedDay"),_=p,p=!1):p&&_&&(h=!1,_=moment(_.data("date"),"YYYY-MM-DD"),p=moment(p.data("date"),"YYYY-MM-DD"),$(".formatted_checkin").val(_.format("YYYY-MM-DD")),$(".formatted_checkout").val(p.format("YYYY-MM-DD")),URL_checkin=_.format("DD/MM/YYYY"),URL_checkout=p.format("DD/MM/YYYY"),$(".checkout-label").addClass("input-label-active"),$("#checkout_date").text(p.format("jYYYY/jMM/jDD")),$("#checkout_day").text(v[p.format("dddd")]),$("#checkout_day").parents(".from_to_date").addClass("active"),$(".stay-invalid, .min-stay-block").tooltip("destroy").removeClass("stay-invalid min-stay-block max-stay-block"),$.app.url.removeParameter("checkin"),$.app.url.removeParameter("checkout"),$(this).closest("#bookItCalendar").length||(m(p.format("YYYY-MM-DD"),_.format("YYYY-MM-DD"),$(".number_of_guests").val()),_=p=null,$("#bookItCalendar").hide()),m(p.format("YYYY-MM-DD"),_.format("YYYY-MM-DD"),$(".number_of_guests").val()),$("#bookItCalendar").hide(),$(".datepicker_inputs").removeClass("picker-inputs-active"),_=p=null)}),$(".number_of_guests").on("change",function(e){var a=$(this)[0],t=$(".guests-label");0<a.value?t.addClass("input-label-active"):t.removeClass("input-label-active")}),$(".from_to_date").on("click",function(e){e.stopPropagation(),$("#bookItCalendar").toggle(),$(".datepicker_inputs").toggleClass("picker-inputs-active")}),$(document).on("mouseenter",".calendar_wrap .calendar-list > .tile:not(.tile-previous, .status-b, .status-z)",function(){var e=$("li[data-date="+$(this).data("date")+"]");$(".calendar_wrap li").removeClass("onHover"),e.addClass("onHover"),h&&k(_.data("date"),e.data("date"),"inRange")}).on("mouseleave",".calendar-list > .tile:not(.tile-previous)",function(){$(".calendar_wrap li").removeClass("onHover"),h&&k(null,null,"inRange")}),$(".calendar-clear").on("click",function(e){e.stopPropagation(),selected_date=null,Y()})}]),$("#view-calendar").click(function(e){$("#list_checkin").click()});var $reserve_btn=$("#reserve_btn");function sendBackToWebview(){messageHandler.postMessage("show_navbar")}function copyToClipboard(e,a){navigator.clipboard.writeText(a);var t=document.getElementById("show-tooltip");t.innerHTML=e,t.classList.add("active"),setInterval(function(){t.classList.remove("active")},3e3)}function scrollToElement(e){document.getElementById(e).scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}$("#book_it_form").on("submit",function(e){var a=$(this);return e.preventDefault(),""==$(".formatted_checkin").val()||""==$(".formatted_checkout").val()?($("#required-checkin").fadeIn(),!1):"0"==$(".number_of_guests").val()?($(".number_of_guests").addClass("input-invalid"),$("#required-guests").fadeIn(),!1):""==(e=$(".number_of_guests").val())||null==e||"0"==e?($(".number_of_guests").focus(),$("#guest_error").show(),!1):($reserve_btn.addClass("btn_loading").attr("disabled","disabled"),$.ajax({url:APP_URL+"/check_user",data:{check_reservation_limit:!0},method:"POST",success:function(e){if(e.error)return $reserve_btn.removeClass("btn_loading").removeAttr("disabled"),$("#pnone_number_form").attr("aria-hidden",!1).find(".signup_popup3").fadeIn(),$("#header").addClass("put-on-top"),$("#urlBack").val(window.location.href+"&autosubmit=true"),!1;a.off("submit"),$("#reserve_submit").click(),a.submit()},error:function(e){$reserve_btn.removeClass("btn_loading").removeAttr("disabled"),403==e.status&&($("#reserve_btn").removeClass("btn_loading").removeAttr("disabled"),$(".login_popup").show(),$("#header").addClass("put-on-top"),$("#urlBack").val(window.location.href+"&autosubmit=true"),$("#autosubmit").val(!0)),e.responseJSON.reserve_limit_reached&&iziToast.show({message:e.responseJSON.message,position:"topRight",color:"rgba(255, 243, 205, 1)",messageColor:"#856404",rtl:"rtl"==$("html").attr("dir"),transitionIn:"bounceInLeft",timeout:1e4})}}),void $(".login-close .icon-close").on("click",function(){$("#header").removeClass("put-on-top")}))}),$(document).ready(function(){if(initialize(),lc_lightbox(".elem",{wrap_class:"lcl_fade_oc",gallery:!0,thumb_attr:"data-lcl-thumb",skin:"dark"}),$(".icon-remove-1, .login-close .login-close").click(function(){$("#site-content").removeClass("blurred")}),!$("#pricing").offset())return!1;$("#pricing").offset().top;var l=this;$.fn.followTo=function(e){function a(){o-i-50<$scrollTop?t.css({position:"absolute",top:o-i-650}):t.css({position:"fixed",top:40})}var t=this,s=$(l),o=$(e).offset().top,i=t.outerHeight();s.resize(function(){o=pos.offset().top,i=t.outerHeight(),a()}),s.scroll(a),a()},$('[data-behavior="modal-close"]').click(function(){$(".contact-modal").addClass("hide"),$(".contact-modal").attr("aria-hidden","true")}),is_mobile||($subnavItems=$("#room_sticky_header .subnav-item"),$roomInfoTopPos=$("#room_info_wrapper").position().top,$subnavInner=$("#subnav_inner"),$(document).on("scroll",function(e){$subnavItems.each(function(){var e,a=$(this),t=$(a.attr("href"));null!=a.attr("data-extra")&&(e=$(a.attr("data-extra"))).position()&&e.position().top<=$scrollTop&&e.position().top+e.height()>$scrollTop&&($(".subnav-item").attr("aria-selected","false"),a.attr("aria-selected","true")),t.position()&&t.position().top<=$scrollTop&&t.position().top+t.height()>$scrollTop&&($subnavItems.attr("aria-selected","false"),a.attr("aria-selected","true")),200<$scrollTop?$subnavInner.addClass("subnav_visible"):$subnavInner.removeClass("subnav_visible")})})),$("#socialLinksWrap").on("click",function(){$(".social-share-widget").toggleClass("widgets-visible")}),window.onload=function(){$("#pricing").hasClass("fixed")?$("#pricing.fixed").css({position:"fixed",top:"0px"}):$("#pricing").css({position:"relative",top:"-40px"})},$(".desc").click(function(){$("#des_content").css("display","block")}),$(".div_check").show();$(".get_type").each(function(){4==$(this).data("id")&&$(".new_id4").addClass("show_off")}),$("#wish_list_text").keyup(function(){$("#wish_list_btn").prop("disabled",!0),0==$(this).val().trim().length?$("#wish_list_btn").prop("disabled",!0):$("#wish_list_btn").prop("disabled",!1)}),$('[name="checkin"]').val()&&$("#required-checkin").hide(),is_mobile||(a=$("#book_it_wrap").offset().top,e=$("#book_it_wrap").height(),t=$("#similar").offset().top-e-200,$(window).scroll(function(){var e=($scrollTop=$(window).scrollTop())+a;a<=e?($(".subnav").addClass("subnav-visible"),$("#book_it_wrap").addClass("fixed")):($(".subnav").removeClass("subnav-visible"),$("#book_it_wrap").removeClass("fixed")),t<=e?$("#book_it_wrap").fadeOut():$("#book_it_wrap").fadeIn()})),$("#room_sticky_header .subnav-item, #review_calendar_btn").on("click",function(e){e.preventDefault();e=$($(this).attr("href")).offset().top-110;$([document.documentElement,document.body]).animate({scrollTop:e},800)}),is_mobile&&($("#fixed_request-reserve").on("click",function(e){$("#roomReserveInfo").fadeIn(200)}),$("#close-booking-panel, #review_calendar_btn").on("click",function(e){$("#roomReserveInfo").fadeOut(200)}));var a,e,t,s=$("#bookItCalendar");$("#site-content").click(function(e){s.is(":visible")&&!$(e.target).closest("#bookItCalendar").length&&(s.hide(),$(".datepicker_inputs").removeClass("picker-inputs-active"))}),$(".number_of_guests").change(function(e){"0"!=$(this).val()&&($(this).removeClass("input-invalid"),$("#required-guests").hide())}),$(".about-more-wrapper").click(function(e){$("#about_wrapper, #chevron_down_icon").toggleClass("collapsed")}),$("#returnBtn").click(function(e){history.back(),sendBackToWebview()})}),is_webview&&messageHandler.postMessage("hide_navbar");