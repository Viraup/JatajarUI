$(document).ready(function(){$('#hamburger_btn').click(function(){var $this=$(this);if($this.hasClass('nav--open')){$(this).removeClass('nav--open');$('.mobile-nav-menu').css('visibility','hidden');$("body").removeClass("pos-fix");$('.mobile-nav-menu .nav-content--sm').removeClass('right-content');$('.hamburger').removeClass('is-active');}else{$(this).addClass('nav--open');$('.mobile-nav-menu').css('visibility','visible');$("body").addClass("pos-fix");$('.mobile-nav-menu .nav-content--sm').addClass('right-content');$('.hamburger').addClass('is-active');}});$('.nav-mask--sm').click(function(){$('#hamburger_btn').removeClass('nav--open');$('.header--sm .nav--sm').css('visibility','hidden');$("body").removeClass("remove-pos-fix pos-fix");$('.mobile-nav-menu .nav-content--sm').removeClass('right-content');$('.hamburger').removeClass('is-active');});$('.search-modal-trigger, #sm-search-field').click(function(){$('#search-modal--sm').removeClass('hide');$('#search-modal--sm').slideDown();$('#search-modal--sm').attr('aria-hidden','false');});$('.search-modal-container .modal-close').click(function(){$('#search-modal--sm').addClass('hide');$('#search-modal--sm').attr('aria-hidden','true');return false;});$('.list-nav-link a').click(function(){$('.listing-nav-sm').removeClass('collapsed');});$('.login_popup_head, .bck_btn, .login_popup_open, .items-logged-out').click(function(e){e.preventDefault();$("body").addClass("pos-fix");$(".sidebar").addClass("overflow-control");$(".login_popup").show();$(".signup_popup").hide();$(".signup_popup2").hide();$(".signup_popup3").hide();$(".forgot-passward").hide();$(".alert_popup").hide();});$('.rm_lg').click(function(event){$("body").removeClass("pos-fix");$(".sidebar").removeClass("overflow-control");$(".login_popup, .forgot-passward, .signup_popup, .signup_popup2, .signup_popup3, .alert_popup").fadeOut(200);if($('.header--sm .action--sm').hasClass('nav--open')){$('.header--sm .action--sm').removeClass('nav--open');$('.header--sm .nav--sm').css('visibility','hidden');$('.makent-header .header--sm .nav-content--sm').removeClass('right-content');$('.hamburger').removeClass('is-active');}$('#hamburger_btn').removeClass('nav--open');$('.hamburger').removeClass('is-active');});$('.top-home').click(function(event){event.stopPropagation();});$('.forgot-password-popup').click(function(e){e.preventDefault();$("body").addClass("pos-fix");$(".login_popup").hide();$(".forgot-passward").show();});$('.signup_popup_head').click(function(e){e.preventDefault();$("body").addClass("pos-fix");$(".sidebar").addClass("overflow-control");$(".login_popup").hide();});$('.signup_popup_head2').click(function(e){e.preventDefault();$("body").addClass("pos-fix");$(".signup_popup2").show();$(".signup_popup3").hide();$(".signup_popup").hide();});$('.signup_popup_head3').click(function(e){e.preventDefault();$("body").addClass("pos-fix");$(".signup_popup3").show();$(".signup_popup2").hide();$(".signup_popup").hide();$("#user_new_phone .parent-loader").hide()});$('ul.menu-group li a:not(.collabsable-menu)').click(function(){$('.nav--sm').css('visibility','hidden');});$('.nav-mask--sm').click(function(){$('.header--sm .nav--sm').css('visibility','hidden');$('.makent-header .header--sm .nav-content--sm').css('left','-285px');});$('.nav-mask--sm').click(function(){$('.header--sm .nav--sm').css('visibility','hidden');$('.makent-header .header--sm .nav-content--sm').css('left','-285px');});$(document).on('change','#user_profile_pic',function(){$('#ajax_upload_form').submit();});$(document).on('change','#user_national_id_pic',function(){$('#ajax_upload_form2').submit();});if(is_mobile){var $link_group=$('.link-group-content'),amenities_height=$link_group.height(),visible_height=($link_group.find('.link-tag').outerHeight())*2,shown_height=is_mobile?(visible_height+10):(visible_height-10);$link_group.addClass('show-less').height(shown_height);$('.footer-search-tags .view-more').on('click',function(){var $this=$(this);$this.hide().closest('.link-group').find('.link-group-content').height('100%');});}$(".search-modal-trigger, #photos, #photo-gallery, .link-reset.burger--sm.header-logo, .vid_pop").click(function(){$("body, html").addClass("non_scrl");});$(document).on('click',".modal-close, #header .nav-mask--sm, .popup",function(){$("body, html").removeClass("non_scrl");});$(".subnav-item.show-collapsed-nav-link").click(function(){$("body").toggleClass("non_scrl");});$('#delete_profile_picture').on('click',function(e){var $this=$(this);$.ajax({url:$this.data('route'),method:'POST',dataType:'json',headers:{Accept:"application/json; charset=utf-8",},success:function(response){if(response.data){$('.profile_photo, .user-avatar.rounded-circle').attr('src',$this.data('default-image'));$('.user-profile-image').css('background','url('+$this.data('default-image')+') center / contain');$('#delete_profile_picture').remove();showNotification(response.message);}},error:function(response){showNotification(response.message,true);},})});$(document).on('click','[id^="wishlist-widget-icon-"], .heart-alt-icon',function(event){event.preventDefault();if(typeof USER_ID=='object'){$("body").addClass("pos-fix");$(".sidebar").addClass("overflow-control");$(".login_popup").show();return false;}var $this=$(this);window.dispatchEvent(new CustomEvent('wishlist-clicked',{bubbles:true,detail:{room_id:($this.data('room_id')||$this.data('room-id')),route:$this.data('route')}}));});lazyImages=new LazyLoad();});function wishlist_data(){return{create_form_open:0,room_id:0,wishlist_list:[],wishlist_room:[],rate_color:'',id:'',name:'',city:'',province:'',photo:'',booking_type:'',bedrooms:'',overall_rating:'',price:'','wishlist_clicked':function wishlist_clicked($event){$('.wl-modal__modal').removeClass('hide');$('.wl-modal-wishlists').addClass('loading');this.room_id=$event.detail.room_id;$.ajax({url:$event.detail.route,context:this,}).done(function(response){$('.wl-modal-wishlists').removeClass('loading');$('.wl-modal__col:nth-child(2)').removeClass('hide');this.wishlist_list=response.wishlist;this.wishlist_room=response.room_info[0];this.rate_color=this.rate_gradient(this.wishlist_room.overall_rating);this.id=response.room_info[0].id;this.name=response.room_info[0].name;this.city=response.room_info[0].rooms_address.cities.label;this.province=response.room_info[0].rooms_address.provinces.label;this.photo=response.room_info[0].photo_name;this.booking_type=response.room_info[0].booking_type;this.bedrooms=response.room_info[0].bedrooms;this.overall_rating=response.room_info[0].overall_rating;this.price=response.room_info[0].rooms_price.night;});},'wishlist_row_select':function wishlist_row_select(index){$.ajax({url:APP_URL+'/save_wishlist',data:{'data':this.room_id,'wishlist_id':this.wishlist_list[index].id,'saved_id':this.wishlist_list[index].saved_id,},method:'POST',dataType:'json',headers:{Accept:"application/json; charset=utf-8",},context:this,}).done(function(response){if(response===null){this.wishlist_list[index].saved_id=null;}else{this.wishlist_list[index].saved_id=response;}});},'close_modal':function close_modal(){var null_count=this.wishlist_list.filter(function(v,i){return v.saved_id==null});if(null_count.length==this.wishlist_list.length){$('#wishlist-widget-'+this.room_id).prop('checked',false);}else{$('#wishlist-widget-'+this.room_id).prop('checked',true);}$('.wl-modal__modal').addClass('hide');},'handle_submit':function handle_submit(event){event.preventDefault();$('.wl-modal__col:nth-child(2)').addClass('hide');$.ajax({url:APP_URL+'/wishlist_create',data:{data:$('.wl-modal-footer__input').val(),id:this.room_id,},context:this,method:'POST',dataType:'json',headers:{Accept:"application/json; charset=utf-8",},}).done(function(response){$('.wl-modal-footer__form').addClass('hide');$('.wl-modal__col:nth-child(2)').removeClass('hide');this.wishlist_list=response;event.preventDefault();});event.preventDefault();},'rate_gradient':function rate_gradient(rate){rate=(rate>5||rate<0)?0:rate;var range=['#4b5969','#4b5969','#9176ab','#fd9e5f','#23c171','#0d6eb8'];return range[Math.floor(rate)];},'check_list':function check_list(){console.log(Object.keys(this.wishlist_room).length);return Object.keys(this.wishlist_room).length;},}}window.onpopstate=function(event){location.reload()};